
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>味香首頁</title>
  <link rel="stylesheet" href="style_classical.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
</head>
<body>

  <!-- Header -->
  <header class="main-header">
    <div class="header-container">
      <img src="images/logo.jpg" alt="味香魚丸 Logo" class="logo">

      <div class="header-right">
        <!-- 購物車按鈕 -->
        <button id="cartBtn" class="cart-btn" aria-label="購物車">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="1.8" viewBox="0 0 24 24">
            <path d="M3 3h2l.4 2M7 13h10l4-8H5.4"/>
            <circle cx="9" cy="20" r="1"/>
            <circle cx="17" cy="20" r="1"/>
          </svg>
          <span id="cartCount" class="cart-count">0</span>
        </button>

        <!-- 漢堡選單 -->
        <button class="menu-toggle" onclick="toggleMenu()" aria-label="選單">☰</button>
      </div>
    </div>

    <!-- 側邊滑出選單 -->
    <div class="side-menu" id="sideMenu">
      <button class="close-btn" onclick="toggleMenu()">✕</button>
      <nav class="side-nav">
        <a href="#">首頁</a>
        <a href="#">關於我們</a>
        <a href="#">產品介紹</a>
        <a href="#">聯絡我們</a>
      </nav>
    </div>

    <!-- 背景遮罩 -->
    <div class="overlay" id="overlay" onclick="toggleMenu()"></div>
  </header>

  <!-- Swiper -->
  <div class="swiper fullscreen-swiper">
    <div class="swiper-wrapper">
      <div class="swiper-slide"><img src="images/logo.jpg" alt="圖片1"></div>
      <div class="swiper-slide"><img src="images/logo.jpg" alt="圖片2"></div>
      <div class="swiper-slide"><img src="images/logo.jpg" alt="圖片3"></div>
      <div class="swiper-slide"><img src="images/logo.jpg" alt="圖片4"></div>
      <div class="swiper-slide"><img src="images/logo.jpg" alt="圖片5"></div>
    </div>
    <div class="swiper-pagination"></div>
  </div>

  <section>
    <h2>歡迎來到味香</h2>
    <p>我們致力於提供最道地的美味，選用高品質食材，結合傳統與創新，為您帶來難忘的餐飲體驗。</p>
  </section>

  <section class="video-section">
    <div class="video-wrapper">
      <iframe 
        src="https://www.youtube.com/embed/你的影片ID" 
        frameborder="0" allowfullscreen>
      </iframe>
    </div>
  </section>

  <!-- 產品 -->
  <section class="product-section">
    <div class="product-grid">

      <div class="product-card">
        <a class="thumb" href="product2.html">
          <img src="images/product2.jpg" alt="福州丸">
          <h3>福州丸</h3>
          <p>Q彈飽滿，福德你心</p>
        </a>
        <div class="price">NT$ 120</div>
        <button class="add-to-cart" type="button"
                data-id="p2" data-name="福州丸" data-price="120" data-img="images/product2.jpg">加入購物車</button>
      </div>

      <div class="product-card">
        <a class="thumb" href="product3.html">
          <img src="images/product3.jpg" alt="甜不辣（小片）">
          <h3>甜不辣（小片）</h3>
          <p>高魚漿比例</p>
        </a>
        <div class="price">NT$ 80</div>
        <button class="add-to-cart" type="button"
                data-id="p3" data-name="甜不辣（小片）" data-price="80" data-img="images/product3.jpg">加入購物車</button>
      </div>

      <div class="product-card">
        <a class="thumb" href="product4.html">
          <img src="images/product4.jpg" alt="甜不辣（條）">
          <h3>甜不辣（條）</h3>
          <p>高魚漿比例</p>
        </a>
        <div class="price">NT$ 90</div>
        <button class="add-to-cart" type="button"
                data-id="p4" data-name="甜不辣（條）" data-price="90" data-img="images/product4.jpg">加入購物車</button>
      </div>

      <div class="product-card">
        <a class="thumb" href="product5.html">
          <img src="images/product5.jpg" alt="甜不辣（中片）">
          <h3>甜不辣（中片）</h3>
          <p>高魚漿比例</p>
        </a>
        <div class="price">NT$ 100</div>
        <button class="add-to-cart" type="button"
                data-id="p5" data-name="甜不辣（中片）" data-price="100" data-img="images/product5.jpg">加入購物車</button>
      </div>

      <div class="product-card">
        <a class="thumb" href="product6.html">
          <img src="images/product6.JPEG" alt="赤肉羹">
          <h3>赤肉羹</h3>
          <p>口感扎實，傳統好滋味</p>
        </a>
        <div class="price">NT$ 120</div>
        <button class="add-to-cart" type="button"
                data-id="p6" data-name="赤肉羹" data-price="120" data-img="images/product6.JPEG">加入購物車</button>
      </div>

      <div class="product-card">
        <a class="thumb" href="product7.html">
          <img src="images/product7.JPEG" alt="魷魚羹">
          <h3>魷魚羹</h3>
          <p>彈牙魚漿，特選乾魷魚</p>
        </a>
        <div class="price">NT$ 130</div>
        <button class="add-to-cart" type="button"
                data-id="p7" data-name="魷魚羹" data-price="130" data-img="images/product7.JPEG">加入購物車</button>
      </div>

      <div class="product-card">
        <a class="thumb" href="product8.html">
          <img src="images/product8.JPEG" alt="小魚丸">
          <h3>小魚丸</h3>
          <p>古早工法，口感扎實</p>
        </a>
        <div class="price">NT$ 110</div>
        <button class="add-to-cart" type="button"
                data-id="p8" data-name="小魚丸" data-price="110" data-img="images/product8.JPEG">加入購物車</button>
      </div>

    </div> <!-- ✅ 關閉 .product-grid -->
  </section>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="footer-container">
      <div class="footer-map">
        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d231306.02479954233!2d121.24568552500003!3d25.062679600000017!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3442a93e632525ed%3A0x15d1c3f2d033f811!2z5ZGz6aaZ6a2a5Li45bqX!5e0!3m2!1szh-TW!2stw!4v1754579466034!5m2!1szh-TW!2stw" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
      </div>
      <div class="footer-links">
        <ul>
          <li><a href="#">隱私政策</a></li>
          <li><a href="#">退換貨政策</a></li>
          <li><a href="#">運送政策</a></li>
          <li><a href="#">企業專區</a></li>
          <li><a href="#">常見問題</a></li>
        </ul>
      </div>
      <div class="footer-payment">
        <img src="images/visa.png" alt="VISA">
        <img src="images/mastercard.png" alt="MasterCard">
        <img src="images/linepay.png" alt="Line Pay">
      </div>
      <div class="footer-info">
        <p>103台北市大同區迪化街一段337號｜TEL: （02）2553-6608｜<a href="mailto:wish@1866.com.tw">wish@1866.com.tw</a></p>
        <p>健衢生技有限公司 | 統一編號 123456678</p>
        <p>Powered by Hao</p>
      </div>
    </div>
  </footer>

  <footer>
    &copy; 2025 健衢生技有限公司. 保留所有權利。
  </footer>

  <!-- 🛒 購物車抽屜 -->
  <aside id="cartDrawer" class="cart-drawer">
    <div class="cart-header">
      <h3>購物車</h3>
      <button id="closeCart" class="close-cart">✕</button>
    </div>
    <div id="cartItems" class="cart-items"><!-- JS 會塞內容 --></div>
    <div class="cart-footer">
      <div class="cart-total">小計：<span id="cartSubtotal">NT$ 0</span></div>
      <button id="checkoutBtn" class="checkout-btn">前往結帳</button>
    </div>
  </aside>

  <!-- 遮罩 -->
  <div id="cartMask" class="cart-mask"></div>

  <!-- Swiper -->
  <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
  <script>
    const swiper = new Swiper('.swiper', {
      loop: true,
      autoplay: { delay: 5000, disableOnInteraction: false },
      pagination: { el: '.swiper-pagination', clickable: true },
    });
  </script>

  <!-- 側欄選單：只留這一個版本 -->
  <script>
    function toggleMenu() {
      const sideMenu = document.getElementById('sideMenu');
      const overlay = document.getElementById('overlay');
      sideMenu.classList.toggle('show');
      overlay.classList.toggle('show');
    }
  </script>

  <!-- 購物車 -->
  <script>
  (() => {
    const $ = (s, p=document) => p.querySelector(s);

    const cartBtn = $('#cartBtn');
    const cartDrawer = $('#cartDrawer');
    const cartMask = $('#cartMask');
    const closeCart = $('#closeCart');
    const cartItemsEl = $('#cartItems');
    const cartSubtotalEl = $('#cartSubtotal');
    const cartCountEl = $('#cartCount');

    let cart = load();
    updateBadge(); render();

    // 開關購物車
    cartBtn?.addEventListener('click', () => openCart(true));
    cartMask?.addEventListener('click', () => openCart(false));
    closeCart?.addEventListener('click', () => openCart(false));

    // 首頁加入購物車
    document.addEventListener('click', (e) => {
      const btn = e.target.closest('.add-to-cart');
      if (!btn) return;
      e.preventDefault(); e.stopPropagation();

      add({
        id: btn.dataset.id,
        name: btn.dataset.name,
        price: Number(btn.dataset.price || 0),
        img: btn.dataset.img || ''
      });
      openCart(true);
      toast('已加入購物車');
    });

    // 抽屜內操作
    cartItemsEl.addEventListener('click', (e) => {
      const row = e.target.closest('.cart-item');
      if (!row) return;
      const id = row.dataset.id;
      if (e.target.matches('.inc')) changeQty(id, +1);
      if (e.target.matches('.dec')) changeQty(id, -1);
      if (e.target.matches('.remove-btn')) remove(id);
    });

    function add(item){
      const exist = cart.find(x => x.id === item.id);
      if (exist) exist.qty += 1;
      else cart.push({ ...item, qty: 1 });
      save(); updateBadge(); render();
    }
    function changeQty(id, d){
      const x = cart.find(i => i.id === id); if (!x) return;
      x.qty += d; if (x.qty <= 0) cart = cart.filter(i => i.id !== id);
      save(); updateBadge(); render();
    }
    function remove(id){
      cart = cart.filter(i => i.id !== id);
      save(); updateBadge(); render();
    }

    function render(){
      if (!cart.length){
        cartItemsEl.innerHTML = `<p style="padding:12px;color:#6b4c38;">購物車目前是空的～</p>`;
        cartSubtotalEl.textContent = money(0);
        return;
      }
      cartItemsEl.innerHTML = cart.map(it => `
        <div class="cart-item" data-id="${it.id}">
          <img src="${it.img}" alt="${it.name}">
          <div>
            <h4>${it.name}</h4>
            <div class="price">${money(it.price)}</div>
            <button class="remove-btn">移除</button>
          </div>
          <div class="qty">
            <button class="dec">-</button>
            <input type="text" value="${it.qty}" readonly>
            <button class="inc">+</button>
          </div>
        </div>
      `).join('');
      const subtotal = cart.reduce((s, i) => s + i.price * i.qty, 0);
      cartSubtotalEl.textContent = money(subtotal);
    }

    function updateBadge(){
      const n = cart.reduce((s,i)=>s+i.qty,0);
      if (cartCountEl) cartCountEl.textContent = n;
    }
    function save(){ localStorage.setItem('cart', JSON.stringify(cart)); }
    function load(){ try{ return JSON.parse(localStorage.getItem('cart')||'[]'); }catch{ return []; } }
    function money(n){ return `NT$ ${n.toLocaleString('zh-TW')}`; }
    function openCart(show){ cartDrawer.classList.toggle('show', show); cartMask.classList.toggle('show', show); }
    function toast(msg){
      const t = document.createElement('div');
      t.textContent = msg;
      t.style = 'position:fixed;left:50%;top:14%;transform:translateX(-50%);background:#333;color:#fff;padding:8px 12px;border-radius:10px;opacity:.95;z-index:2000;';
      document.body.appendChild(t); setTimeout(()=>t.remove(), 1200);
    }
    // 讓使用者按 ESC 可以關閉
document.addEventListener('keydown', (e) => {
  if (e.key === 'Escape') openCart(false);
});

  })();
  </script>

</body>
</html>
